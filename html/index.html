<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>首页</title>


    <link rel="stylesheet" href="../css/normalize.css">
    <!-- <link rel="stylesheet" href="../css/iconfont.css"> -->
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_221354_yz900mmny2h.css">
    <link rel="stylesheet" href="../css/common.css">
    <script src="../js/vue.js"></script>

</head>

<body>

    <div id="j-video">

        <div id="j-video-top">
            <div id="j-video-top-left">
                <a id="btn-setting">
                    <i class="iconfont icon-more"></i>
                </a>
            </div>
            <div id="j-video-top-center">
                <span>文件名</span>
            </div>
            <div id="j-video-top-right">
                <ul>
                    <li>
                        <a id="btn-min">
                            <i class="iconfont icon-min"></i>
                        </a>
                    </li>
                    <li>
                        <a id="btn-max">
                            <i class="iconfont icon-max"></i>
                        </a>
                    </li>
                    <li>
                        <a id="btn-close">
                            <i class="iconfont icon-close"></i>
                        </a>
                    </li>
                </ul>
                <!-- <div id="j-video-frame-min"></div>
                <div id="j-video-frame-max"></div>
                <div id="j-video-frame-close"></div> -->
            </div>
        </div>

        <div id="j-video-screen">
            <div id="j-video-screen-left"></div>
            <video width="100%" height="100%">
                <source src="../res/test.mp4" type="video/mp4">
            </video>
            <div id="j-video-screen-right">
                <ul>
                    <li>第一集</li>
                    <li>第二集</li>
                    <li>第三集</li>
                </ul>
            </div>
        </div>


        <div id="j-video-bottom" show="true">
            <div id="j-video-process" control="false">
                <div id="j-video-process-back" @click="pause()">&lt;&lt;</div>
                <div id="j-video-process-bar">
                    <div id="j-video-process-load"></div>
                    <div id="j-video-process-play">
                        <div id="j-video-process-drag"></div>
                    </div>
                </div>
                <div id="j-video-process-next" @click="pause()">&gt;&gt;</div>
            </div>

            <div id="j-video-control">
                <!-- <button id="pause" @click="pause()">&gt;</button> -->
                <!-- <button id="screenMax" @click="screenMax()">max</button> -->
                <!-- <button id="screenMid" @click="screenMid()">mid</button> -->
                <!-- <button id="screenMin" @click="screenMin()">min</button> -->
                <div id="j-video-control-left">
                    <div id="play" @click="play()">
                        <a>
                            <i class="iconfont" :class="{'icon-play': !played, 'icon-pause': played}"></i>
                        </a>
                    </div>
                    <div id="next">
                        <a>
                            <i class="iconfont icon-next"></i>
                        </a>
                    </div>
                    <div>
                        {{currentTime}}/{{duration}}
                    </div>
                </div>
            </div>
        </div>

        <div id="j-video-upload">
            <form enctype="multipart/form-data" method="post">
                <input type="file" name="file" id="pic" @change="upload()" />
                <div id="j-video-upload-open" @click="open()">打开文件</div>
                <div id="j-video-upload-split"></div>
                <div id="j-video-upload-select">▼</div>
            </form>
        </div>
        <div id="j-video-play"></div>

    </div>



    <script type="text/javascript">

        // 当前环境：b for broswer, c for client

        const env = "c";

        let j_video_screen = new Vue({
            el: "#j-video-screen video"
        });
        let j_video_bar = new Vue({
            el: "#j-video-control #j-video-control-left",
            data: {
                played: false,
                currentTime: j_video_screen.$el.currentTime,
                duration: j_video_screen.$el.duration
            },
            methods: {
                play: function () {
                    if (j_video_screen.$el.paused) {
                        this.played = true;
                        j_video_screen.$el.play();
                    } else {
                        this.played = false;
                        j_video_screen.$el.pause();
                    }
                },
                screenMax: function () {
                    j_video_screen.$el.width = 560;
                },
                screenMid: function () {
                    j_video_screen.$el.width = 480;
                },
                screenMin: function () {
                    j_video_screen.$el.width = 320;
                }
            }
        });
        let temp = new Vue({
            el: "#j-video-upload input",
            methods: {
                upload: function () {
                    // alert(this.$el.files[0]);
                    console.log(this.$el.files);
                    let file = this.$el.files[0];
                    let name = file.name;
                    let size = file.size;
                    console.log("文件名:" + name + "大小:" + size);

                    let reader = new FileReader();

                    reader.onload = function () {
                        //当读取完成后回调这个函数,然后此时文件的内容存储到了result中,直接操作即可
                        console.log(this.result);
                    }
                }
            }
        });
        let j_video_upload = new Vue({
            el: '#j-video-upload',
            methods: {
                open: function () {
                    temp.$el.click();
                }
            }
        });

        // 窗口控制：c

        switch(env){
            case "c":
                let ipc = require('electron').ipcRenderer;
                document.getElementById('btn-min').addEventListener('click', () => {
                    ipc.send('window-min');
                });
                document.getElementById('btn-max').addEventListener('click', () => {
                    ipc.send('window-max');
                });
                document.getElementById('btn-close').addEventListener('click', () => {
                    ipc.send('window-close');
                });
                break;
            case "b":
            default:
                break;
        }

    </script>


</body>

</html>